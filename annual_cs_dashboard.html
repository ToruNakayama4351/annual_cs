<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¥‘ç´„çŠ¶æ³ å››è±¡é™ãƒãƒƒãƒ—</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>
  <style>
    body { 
      margin: 0; 
      padding: 20px;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Sans', sans-serif; 
      background: #fff;
    }
    h2 { text-align: center; margin-bottom: 5px; }
    .subtitle { text-align: center; color: #666; font-size: 14px; margin-top: 0; }
    .filters { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 15px; justify-content: center; }
    .filters button {
      padding: 6px 12px;
      font-size: 12px;
      border: 1px solid #ccc;
      border-radius: 4px;
      cursor: pointer;
      transition: opacity 0.2s;
    }
    .filters button.inactive { opacity: 0.4; background: #f5f5f5 !important; color: #333 !important; }
    .chart-container { width: 100%; max-width: 900px; margin: 0 auto; }
    .legend { display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; margin-top: 15px; font-size: 12px; }
    .legend-item { display: flex; align-items: center; gap: 5px; }
    .legend-color { width: 12px; height: 12px; border-radius: 50%; }
    .quadrant-guide {
      margin-top: 20px;
      padding: 15px;
      background: #f9f9f9;
      border-radius: 8px;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
    }
    .quadrant-guide h4 { margin: 0 0 10px 0; }
    .quadrant-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 13px; }
    .quadrant-grid > div { padding: 8px; border-radius: 4px; }
    .q-tr { background: #ffebee; }
    .q-tl { background: #fff3e0; }
    .q-br { background: #e3f2fd; }
    .q-bl { background: #e8f5e9; }
  </style>
</head>
<body>
  <h2>å¥‘ç´„çŠ¶æ³ å››è±¡é™ãƒãƒƒãƒ—</h2>
  <p class="subtitle">åŸºæº–æ—¥: 2026å¹´1æœˆ5æ—¥</p>
  
  <div class="filters" id="filters"></div>
  
  <div class="chart-container">
    <canvas id="chart"></canvas>
  </div>
  
  <div class="legend" id="legend"></div>
  
  <div class="quadrant-guide">
    <h4>ğŸ“ å››è±¡é™ã®è¦‹æ–¹</h4>
    <div class="quadrant-grid">
      <div class="q-tr"><strong>ğŸ”´ å³ä¸Šï¼ˆè¦æ³¨æ„ï¼‰</strong><br>æ®‹ã‚Šå°‘ãªã„ Ã— çµŒéç‡é«˜ã„<br>â†’ å¥‘ç´„çµ‚äº†é–“è¿‘ï¼</div>
      <div class="q-tl"><strong>ğŸŸ¡ å·¦ä¸Š</strong><br>æ®‹ã‚Šå¤šã„ Ã— çµŒéç‡é«˜ã„<br>â†’ é•·æœŸå¥‘ç´„ã®å¾ŒåŠ</div>
      <div class="q-br"><strong>ğŸ”µ å³ä¸‹</strong><br>æ®‹ã‚Šå°‘ãªã„ Ã— çµŒéç‡ä½ã„<br>â†’ çŸ­æœŸå¥‘ç´„ã®åºç›¤</div>
      <div class="q-bl"><strong>ğŸŸ¢ å·¦ä¸‹ï¼ˆå®‰å¿ƒï¼‰</strong><br>æ®‹ã‚Šå¤šã„ Ã— çµŒéç‡ä½ã„<br>â†’ ã¾ã ã¾ã ä½™è£•ã‚ã‚Š</div>
    </div>
  </div>

  <script>
    const rawData = [
      { name: "JFEã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°", fullName: "JFEã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°æ ªå¼ä¼šç¤¾_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_ç’°å¢ƒæœ¬éƒ¨_2504-2603", stage: "22_ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ", remainingDays: 85, progressRate: 76.6, amount: 100000, owner: "ä½è—¤ å“²å¤ª" },
      { name: "ã‚»ãƒ³ã‚¹ãƒ“ãƒ¼", fullName: "æ ªå¼ä¼šç¤¾ã‚»ãƒ³ã‚¹ãƒ“ãƒ¼_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_æœ¬ç¤¾å·¥å ´ï¼ˆç¥å¥ˆå·ï¼‰_2505-2604", stage: "21_ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ä¸­", remainingDays: 115, progressRate: 68.4, amount: 10000, owner: "ä¸­å±± å¾¹" },
      { name: "ã‚µãƒ¼ãƒ¢ãƒ†ãƒƒã‚¯", fullName: "æ ªå¼ä¼šç¤¾ã‚µãƒ¼ãƒ¢ãƒ†ãƒƒã‚¯_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_æœ¬ç¤¾å·¥å ´ï¼ˆå¤§é˜ªï¼‰_2502-3001", stage: "21_ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ä¸­", remainingDays: 1487, progressRate: 18.5, amount: 56000, owner: "ä¸­å±± å¾¹" },
      { name: "æ—¥æœ¬ã‚±ãƒ­ãƒƒã‚°", fullName: "æ—¥æœ¬ã‚±ãƒ­ãƒƒã‚°åˆåŒä¼šç¤¾_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_ç¾¤é¦¬å·¥å ´_2508-2608", stage: "23_ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ ", remainingDays: 238, progressRate: 37.0, amount: 150000, owner: "ä½è—¤ å“²å¤ª" },
      { name: "ã‚¿ãƒã‚¨ã‚¹", fullName: "æ ªå¼ä¼šç¤¾ã‚¿ãƒã‚¨ã‚¹_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_æ„›çŸ¥/æ­¦è”µ/éˆ´é¹¿å·¥å ´_2508-2607", stage: "23_ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ ", remainingDays: 207, progressRate: 43.1, amount: 100000, owner: "ä½è—¤ å“²å¤ª" },
      { name: "æ—¥æœ¬è§¦åª’", fullName: "æ ªå¼ä¼šç¤¾æ—¥æœ¬è§¦åª’_ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«_å§«è·¯å·¥å ´_2508-2608", stage: "21_ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ä¸­", remainingDays: 238, progressRate: 37.0, amount: 380000, owner: "ä½è—¤ å“²å¤ª" },
      { name: "æ±æ´‹æ–°è–¬", fullName: "æ ªå¼ä¼šç¤¾æ±æ´‹æ–°è–¬_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_é³¥æ –å·¥å ´_2507-2706", stage: "21_ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ä¸­", remainingDays: 541, progressRate: 25.8, amount: 130000, owner: "ä½è—¤ å“²å¤ª" },
      { name: "ã‚¤ãƒ¯ã‚µã‚­", fullName: "æ ªå¼ä¼šç¤¾ã‚¤ãƒ¯ã‚µã‚­_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_å¤§é˜ªå·¥å ´_2502-2601", stage: "25_ãƒãƒ£ãƒ¼ãƒ³ãƒªã‚¹ã‚¯", remainingDays: 26, progressRate: 92.9, amount: 40000, owner: "ä½è—¤ å“²å¤ª" },
      { name: "ã‚¯ãƒ©ã‚¤ãƒ³", fullName: "æ ªå¼ä¼šç¤¾ã‚¯ãƒ©ã‚¤ãƒ³_é’æ¢…å·¥å ´_2504-2603", stage: "21_ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ä¸­", remainingDays: 85, progressRate: 76.6, amount: 50000, owner: "ä½è—¤ å“²å¤ª" },
      { name: "ãƒã‚¯ã‚µã‚¹", fullName: "æ ªå¼ä¼šç¤¾ãƒã‚¯ã‚µã‚¹_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_å²©æ‰‹å·¥å ´_2502-2601", stage: "21_ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ä¸­", remainingDays: 26, progressRate: 92.9, amount: 100000, owner: "ä½è—¤ å“²å¤ª" },
      { name: "ã‚µãƒ³ã‚³ãƒ¼", fullName: "æ ªå¼ä¼šç¤¾ã‚µãƒ³ã‚³ãƒ¼_å €é‡‘å·¥å ´ï¼ˆé•·é‡ï¼‰ä¸‰ç”°å·¥å ´ï¼ˆé•·é‡ï¼‰_2507-2608", stage: "22_ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ", remainingDays: 238, progressRate: 44.1, amount: 100000, owner: "ä¸­å±± å¾¹" },
      { name: "ã‚µãƒ³ã‚·ãƒ§ã‚¦", fullName: "ã‚µãƒ³ã‚·ãƒ§ã‚¦æ ªå¼ä¼šç¤¾_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_æµœæ¾å·¥å ´_2507-2606", stage: "23_ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ ", remainingDays: 176, progressRate: 51.6, amount: 80000, owner: "ä½è—¤ å“²å¤ª" },
      { name: "é•·å‚æ¨¹è„‚å·¥æ¥­", fullName: "æœ‰é™ä¼šç¤¾é•·å‚æ¨¹è„‚å·¥æ¥­_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_å²¡å´å·¥å ´_2510-2609", stage: "24_ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«", remainingDays: -5, progressRate: 105.5, amount: 50000, owner: "ä½è—¤ å“²å¤ª" },
      { name: "ã‚·ã‚®ãƒ¤ç²¾æ©Ÿ(26)", fullName: "æ ªå¼ä¼šç¤¾ã‚·ã‚®ãƒ¤ç²¾æ©Ÿè£½ä½œæ‰€_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_æœ¬ç¤¾å·¥å ´ï¼ˆåºƒå³¶ï¼‰_2510-2512", stage: "26_CSå¯¾å¿œãƒªãƒªãƒ¼ã‚¹", remainingDays: -5, progressRate: 105.5, amount: 50000, owner: "ä½è—¤ å“²å¤ª" },
      { name: "åŒ—é™¸å»ºå·¥(è¿½åŠ )", fullName: "åŒ—é™¸å»ºå·¥æ ªå¼ä¼šç¤¾_iPadè¿½åŠ åˆ†_å®‰ç”°å·¥å ´ï¼ˆå¯Œå±±ï¼‰_2601-2703", stage: "28_å¥‘ç´„æ›´æ–°å®Œäº†", remainingDays: 450, progressRate: 0.9, amount: 105000, owner: "ä¸­å±± å¾¹" },
      { name: "åŒ—é™¸å»ºå·¥", fullName: "åŒ—é™¸å»ºå·¥æ ªå¼ä¼šç¤¾_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_å®‰ç”°å·¥å ´ï¼ˆå¯Œå±±ï¼‰_2504-2703", stage: "22_ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ", remainingDays: 450, progressRate: 38.3, amount: 70000, owner: "ä¸­å±± å¾¹" },
      { name: "ã‚·ã‚®ãƒ¤ç²¾æ©Ÿ(28a)", fullName: "æ ªå¼ä¼šç¤¾ã‚·ã‚®ãƒ¤ç²¾æ©Ÿè£½ä½œæ‰€_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_æœ¬ç¤¾å·¥å ´ï¼ˆåºƒå³¶ï¼‰_2507-2509", stage: "28_å¥‘ç´„æ›´æ–°å®Œäº†", remainingDays: -97, progressRate: 206.6, amount: 50000, owner: "è½åˆ è±Š" },
      { name: "ã‚·ã‚®ãƒ¤ç²¾æ©Ÿ(28b)", fullName: "æ ªå¼ä¼šç¤¾ã‚·ã‚®ãƒ¤ç²¾æ©Ÿè£½ä½œæ‰€_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_æœ¬ç¤¾å·¥å ´ï¼ˆåºƒå³¶ï¼‰_2504-2506", stage: "28_å¥‘ç´„æ›´æ–°å®Œäº†", remainingDays: -189, progressRate: 310.0, amount: 50000, owner: "è½åˆ è±Š" },
      { name: "ãƒã‚¤ãƒ¬ãƒƒã‚¯ã‚¹", fullName: "æ ªå¼ä¼šç¤¾ãƒã‚¤ãƒ¬ãƒƒã‚¯ã‚¹ã‚³ãƒ¼ãƒãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_ä¸‰ãƒ¶æ—¥å·¥å ´ï¼ˆé™å²¡ï¼‰_2507-3006", stage: "22_ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ", remainingDays: 1637, progressRate: 10.3, amount: 80000, owner: "ä¸­å±± å¾¹" },
      { name: "æ—­å…‰é›»æ©Ÿ", fullName: "æ—­å…‰é›»æ©Ÿæ ªå¼ä¼šç¤¾_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_æ˜çŸ³å·¥å ´ï¼ˆå…µåº«ï¼‰_2506-2705", stage: "22_ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ", remainingDays: 511, progressRate: 29.9, amount: 70000, owner: "ä¸­å±± å¾¹" },
      { name: "ãƒã‚¤ãƒ¬ãƒƒã‚¯ã‚¹å®®åŸ", fullName: "æ ªå¼ä¼šç¤¾ãƒã‚¤ãƒ¬ãƒƒã‚¯ã‚¹å®®åŸ_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_å®®åŸå·¥å ´ï¼ˆå®®åŸï¼‰_2509-3008", stage: "21_ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ä¸­", remainingDays: 1699, progressRate: 6.5, amount: 80000, owner: "ä¸­å±± å¾¹" },
      { name: "MERF", fullName: "æ ªå¼ä¼šç¤¾MERF_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_æœ¬ç¤¾å·¥å ´ï¼ˆå¯Œå±±ï¼‰_2504-3003", stage: "21_ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ä¸­", remainingDays: 1546, progressRate: 15.3, amount: 65000, owner: "ä¸­å±± å¾¹" },
      { name: "å¤§ç™»å»ºè¨­å·¥æ¥­", fullName: "å¤§ç™»å»ºè¨­å·¥æ¥­æ ªå¼ä¼šç¤¾_ãƒ—ãƒ©ãƒ³å_ä¼Šä¸‡é‡Œå·¥å ´ï¼ˆä½è³€ï¼‰_2505-2604", stage: "22_ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ", remainingDays: 115, progressRate: 66.1, amount: 68000, owner: "ä¸­å±± å¾¹" },
      { name: "ã‚¨ã‚¢ãƒ»ã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼é˜²ç½", fullName: "ã‚¨ã‚¢ãƒ»ã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼é˜²ç½æ ªå¼ä¼šç¤¾_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_æœ¬ç¤¾å·¥å ´ï¼ˆå…µåº«ï¼‰_2507-2606", stage: "23_ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ ", remainingDays: 176, progressRate: 51.6, amount: 100000, owner: "ä¸­å±± å¾¹" },
      { name: "æ˜­å’Œé‡‘å±(28)", fullName: "æ˜­å’Œé‡‘å±å·¥æ¥­æ ªå¼ä¼šç¤¾_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_å¤§åˆ†å·¥å ´ï¼ˆå¤§åˆ†ï¼‰_2408-2507", stage: "28_å¥‘ç´„æ›´æ–°å®Œäº†", remainingDays: -158, progressRate: 143.4, amount: 50000, owner: "è½åˆ è±Š" },
      { name: "ã‚·ã‚®ãƒ¤ç²¾æ©Ÿ(28c)", fullName: "æ ªå¼ä¼šç¤¾ã‚·ã‚®ãƒ¤ç²¾æ©Ÿè£½ä½œæ‰€_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_æœ¬ç¤¾å·¥å ´ï¼ˆåºƒå³¶ï¼‰_2410-2503", stage: "28_å¥‘ç´„æ›´æ–°å®Œäº†", remainingDays: -297, progressRate: 281.1, amount: 50000, owner: "è½åˆ è±Š" },
      { name: "æ—¥é‡‘(è§£ç´„)", fullName: "æ ªå¼ä¼šç¤¾æ—¥é‡‘_Renewal", stage: "29_è§£ç´„", remainingDays: -57, progressRate: 100, amount: 50000, owner: "è½åˆ è±Š" },
      { name: "å³¶ç”°å·¥æ¥­", fullName: "å³¶ç”°å·¥æ¥­æ ªå¼ä¼šç¤¾_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_æœ¬ç¤¾ãƒ»ç¬¬ä¸€å·¥å ´ï¼ˆç¾¤é¦¬ï¼‰_2502-2701", stage: "22_ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ", remainingDays: 391, progressRate: 46.4, amount: 40000, owner: "ä¸­å±± å¾¹" },
      { name: "ã‚¹ã‚¶ã‚­å·¥æ¥­æ‰€", fullName: "æ ªå¼ä¼šç¤¾ã‚¹ã‚¶ã‚­å·¥æ¥­æ‰€_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_æœ¬ç¤¾å·¥å ´ï¼ˆå²é˜œï¼‰_2504-2703", stage: "24_ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«", remainingDays: 450, progressRate: 38.3, amount: 100000, owner: "ä¸­å±± å¾¹" },
      { name: "ã‚¼ãƒ³ã‚·ãƒ§ãƒ¼", fullName: "æ ªå¼ä¼šç¤¾ã‚¼ãƒ³ã‚·ãƒ§ãƒ¼ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_ï½ï½å·¥å ´ï¼ˆXXï¼‰_2502-2701", stage: "22_ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ", remainingDays: 391, progressRate: 46.4, amount: 70000, owner: "ä½è—¤ å“²å¤ª" },
      { name: "æ¾æœ¬å·¥æ¥­(27)", fullName: "æ¾æœ¬å·¥æ¥­æ ªå¼ä¼šç¤¾_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_è±Šå‰å·¥å ´ï¼ˆå¤§åˆ†ï¼‰_2412-2511", stage: "27_å¥‘ç´„æ›´æ–°åˆæ„", remainingDays: -36, progressRate: 109.9, amount: 50000, owner: "ä¸­å±± å¾¹" },
      { name: "æ¾æœ¬å·¥æ¥­(æ–°)", fullName: "æ¾æœ¬å·¥æ¥­æ ªå¼ä¼šç¤¾_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_è±Šå‰å·¥å ´ï¼ˆå¤§åˆ†ï¼‰_2512-2611", stage: "23_ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ ", remainingDays: 329, progressRate: 9.6, amount: 50000, owner: "ä¸­å±± å¾¹" },
      { name: "ç†å­¦ç›¸åŸç²¾æ©Ÿ", fullName: "æ ªå¼ä¼šç¤¾ç†å­¦ç›¸åŸç²¾æ©Ÿ_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_æœ¬ç¤¾å·¥å ´ï¼ˆæ±äº¬ï¼‰_250808-260807", stage: "22_ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ", remainingDays: 214, progressRate: 41.2, amount: 50000, owner: "ä½è—¤ å“²å¤ª" },
      { name: "å¤ªå¹³æ´‹ãƒãƒ†ãƒªã‚¢ãƒ«", fullName: "å¤ªå¹³æ´‹ãƒãƒ†ãƒªã‚¢ãƒ«æ ªå¼ä¼šç¤¾_ç†Šè°·å·¥å ´ï¼ˆåŸ¼ç‰ï¼‰å°é‡ç”°å·¥å ´ï¼ˆå±±å£ï¼‰è¥¿å¤šæ‘©å·¥å ´ï¼ˆæ±äº¬ï¼‰_2503-2602", stage: "22_ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ", remainingDays: 54, progressRate: 85.2, amount: 100000, owner: "ä½è—¤ å“²å¤ª" },
      { name: "æ˜­å’Œé‡‘å±(ä¼Šä¸‡é‡Œ)", fullName: "æ˜­å’Œé‡‘å±å·¥æ¥­æ ªå¼ä¼šç¤¾_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_ä¼Šä¸‡é‡Œå·¥å ´ï¼ˆåºƒå³¶ï¼‰_2502-2601", stage: "22_ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ", remainingDays: 26, progressRate: 92.9, amount: 50000, owner: "ä¸­å±± å¾¹" },
      { name: "æ˜­å’Œé‡‘å±(å¤§åˆ†)", fullName: "æ˜­å’Œé‡‘å±å·¥æ¥­æ ªå¼ä¼šç¤¾_ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼_å¤§åˆ†å·¥å ´ï¼ˆå¤§åˆ†ï¼‰_2508-2607", stage: "24_ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«", remainingDays: 207, progressRate: 43.1, amount: 50000, owner: "ä¸­å±± å¾¹" },
    ];

    const stageConfig = {
      "21_ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ä¸­": { label: "ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ä¸­", color: "#00bcd4" },
      "22_ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ": { label: "ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ", color: "#f44336" },
      "23_ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ ": { label: "ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ ", color: "#ffeb3b", border: "#888" },
      "24_ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«": { label: "ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«", color: "#4caf50" },
      "25_ãƒãƒ£ãƒ¼ãƒ³ãƒªã‚¹ã‚¯": { label: "ãƒãƒ£ãƒ¼ãƒ³ãƒªã‚¹ã‚¯", color: "#9c27b0" },
      "26_CSå¯¾å¿œãƒªãƒªãƒ¼ã‚¹": { label: "CSå¯¾å¿œãƒªãƒªãƒ¼ã‚¹", color: "#9e9e9e" },
      "27_å¥‘ç´„æ›´æ–°åˆæ„": { label: "å¥‘ç´„æ›´æ–°åˆæ„", color: "#2196f3" },
      "28_å¥‘ç´„æ›´æ–°å®Œäº†": { label: "å¥‘ç´„æ›´æ–°å®Œäº†", color: "#2196f3" },
      "29_è§£ç´„": { label: "è§£ç´„", color: "#000000" },
    };

    let selectedStages = new Set(Object.keys(stageConfig));
    let chart;

    // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒœã‚¿ãƒ³ã‚’ä½œæˆ
    const filtersDiv = document.getElementById('filters');
    Object.entries(stageConfig).forEach(([stage, config]) => {
      const btn = document.createElement('button');
      btn.textContent = config.label;
      btn.dataset.stage = stage;
      btn.style.background = config.color;
      btn.style.color = ['22_ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ', '25_ãƒãƒ£ãƒ¼ãƒ³ãƒªã‚¹ã‚¯', '29_è§£ç´„'].includes(stage) ? 'white' : 'black';
      btn.onclick = () => toggleStage(stage, btn);
      filtersDiv.appendChild(btn);
    });

    function toggleStage(stage, btn) {
      if (selectedStages.has(stage)) {
        selectedStages.delete(stage);
        btn.classList.add('inactive');
      } else {
        selectedStages.add(stage);
        btn.classList.remove('inactive');
      }
      updateChart();
    }

    function getFilteredData() {
      return rawData.filter(d => 
        selectedStages.has(d.stage) && 
        d.remainingDays >= 0 && 
        d.progressRate <= 100
      );
    }

    function createDatasets() {
      const grouped = {};
      getFilteredData().forEach(d => {
        if (!grouped[d.stage]) grouped[d.stage] = [];
        grouped[d.stage].push({ x: d.remainingDays, y: d.progressRate, raw: d });
      });

      return Object.entries(grouped).map(([stage, points]) => ({
        label: stageConfig[stage].label,
        data: points,
        backgroundColor: stageConfig[stage].color,
        borderColor: stageConfig[stage].border || stageConfig[stage].color,
        borderWidth: stageConfig[stage].border ? 2 : 1,
        pointRadius: 8,
        pointHoverRadius: 10,
      }));
    }

    function initChart() {
      const ctx = document.getElementById('chart').getContext('2d');
      chart = new Chart(ctx, {
        type: 'scatter',
        data: { datasets: createDatasets() },
        options: {
          responsive: true,
          maintainAspectRatio: true,
          scales: {
            x: {
              reverse: true,
              min: 0,
              max: 600,
              title: { display: true, text: 'â† æ®‹ã‚Šæ—¥æ•°å¤šã„ã€€ã€€ã€€ã€€æ®‹ã‚Šæ—¥æ•°å°‘ãªã„ â†’' },
              ticks: { callback: v => v + 'æ—¥' }
            },
            y: {
              min: 0,
              max: 100,
              title: { display: true, text: 'çµŒéç‡ (%)' },
              ticks: { callback: v => v + '%' }
            }
          },
          plugins: {
            tooltip: {
              callbacks: {
                label: (ctx) => {
                  const d = ctx.raw.raw;
                  return [
                    d.fullName,
                    `ã‚¹ãƒ†ãƒ¼ã‚¸: ${stageConfig[d.stage].label}`,
                    `æ®‹ã‚Šæ—¥æ•°: ${d.remainingDays}æ—¥`,
                    `çµŒéç‡: ${d.progressRate}%`,
                    `æœˆé¡: Â¥${d.amount.toLocaleString()}`,
                    `æ‹…å½“: ${d.owner}`
                  ];
                }
              }
            },
            legend: { display: false },
            annotation: {
              annotations: {
                line1: { type: 'line', xMin: 180, xMax: 180, borderColor: '#999', borderDash: [5, 5], label: { content: 'æ®‹ã‚Š180æ—¥', enabled: true, position: 'start' } },
                line2: { type: 'line', yMin: 50, yMax: 50, borderColor: '#999', borderDash: [5, 5], label: { content: '50%çµŒé', enabled: true, position: 'end' } }
              }
            }
          }
        }
      });
    }

    function updateChart() {
      chart.data.datasets = createDatasets();
      chart.update();
    }

    // å‡¡ä¾‹ã‚’ä½œæˆ
    const legendDiv = document.getElementById('legend');
    Object.entries(stageConfig).forEach(([stage, config]) => {
      const item = document.createElement('div');
      item.className = 'legend-item';
      item.innerHTML = `<div class="legend-color" style="background:${config.color};${config.border ? 'border:2px solid '+config.border : ''}"></div><span>${config.label}</span>`;
      legendDiv.appendChild(item);
    });

    initChart();
  </script>
</body>
</html>
